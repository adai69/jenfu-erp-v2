(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,47821,e=>{"use strict";e.s(["sequences",0,[{key:"QUOTE",prefix:"QU",padding:4,nextNumber:128,scope:"報價"},{key:"ORDER",prefix:"SO",padding:5,nextNumber:3021,scope:"訂單"},{key:"WO",prefix:"WO",padding:5,nextNumber:873,scope:"製令"},{key:"SERIAL",prefix:"CFM",padding:6,nextNumber:54219,scope:"序號"},{key:"USER",prefix:"UA",padding:4,nextNumber:42,scope:"帳號"}],"suppliers",0,[{code:"S-ACM",name:"亞鋼金屬",contact:"陳小姐",phone:"02-1234-5678",level:"A",leadTimeDays:12,status:"active"},{code:"S-PUMP",name:"鑫泉幫浦",contact:"吳經理",phone:"04-8765-4321",level:"A",leadTimeDays:20,status:"active"},{code:"S-CHEM",name:"沛富化工原料",contact:"林先生",phone:"07-2222-8888",level:"B",leadTimeDays:15,status:"suspended"}],"units",0,[{code:"EA",name:"台",category:"count",conversion:"1 台 = 1 件"},{code:"SET",name:"套",category:"count",conversion:"1 套 = 多件零組"},{code:"BAR",name:"條",category:"count",conversion:"1 條 = 1 件"},{code:"KG",name:"公斤",category:"weight",conversion:"1 kg = 1000 g"},{code:"L",name:"公升",category:"volume",conversion:"1 L = 1000 mL"},{code:"MM",name:"毫米",category:"length",conversion:"1 mm = 0.001 m"},{code:"LPM",name:"公升/分鐘",category:"flow",conversion:"1 LPM = 0.001 m³/min"},{code:"M3H",name:"立方米/小時",category:"flow",conversion:"1 m³/h = 16.67 LPM"},{code:"DEG-C",name:"攝氏度",category:"temperature",conversion:"基準溫標 °C"},{code:"DEG-F",name:"華氏度",category:"temperature",conversion:"°F = °C × 1.8 + 32"}],"users",0,[{id:"U-001",name:"張仕杰",primaryRole:"admin",roles:[{role:"admin",departments:["executive","rd","finance","management"],isPrimary:!0},{role:"manager",departments:["rd","finance"]}],departments:["executive","rd","finance","management"],email:"ceo@cfm.com",status:"active",moduleOverrides:{quotes:["approve","lock","cancel"],orders:["approve","lock","cancel"]}},{id:"U-002",name:"張成漢",primaryRole:"manager",roles:[{role:"manager",departments:["production","sales"],isPrimary:!0},{role:"operator",departments:["production"]}],departments:["production","sales"],email:"operation@cfm.com",status:"active",moduleOverrides:{inventory:["lock"],production:["lock"]}},{id:"U-003",name:"張祐豪",primaryRole:"planner",roles:[{role:"planner",departments:["management","sales"],isPrimary:!0},{role:"manager",departments:["management"]}],departments:["management","sales"],email:"planner@cfm.com",status:"active"},{id:"U-004",name:"阮梓明",primaryRole:"operator",roles:[{role:"operator",departments:["production"]}],departments:["production"],email:"worker.vn@cfm.com",status:"active"}]])},84616,43873,78598,e=>{"use strict";var t=e.i(71645);e.s(["DEPARTMENT_DEFINITIONS",0,{executive:{label:"經營",description:"決策／策略"},rd:{label:"研發",description:"產品與設計"},production:{label:"生產",description:"製造與現場"},sales:{label:"營銷",description:"業務與客服"},management:{label:"管理",description:"行政／管理"},finance:{label:"財務",description:"財會／稽核"}},"ROLE_DEFINITIONS",0,{admin:{label:"Admin",description:"序號調整、審核、最高權限",hierarchy:4},manager:{label:"Manager",description:"日常維運與審核啟動",hierarchy:3},planner:{label:"Planner",description:"草稿建立、流程規劃",hierarchy:2},operator:{label:"Operator",description:"查詢與執行現場作業",hierarchy:1}}],43873);let s={users:{label:"使用者",description:"帳號與權限"},units:{label:"計量單位",description:"跨模組基本單位"},suppliers:{label:"供應商",description:"採購夥伴"},customers:{label:"客戶",description:"營銷對象"},parts:{label:"零件",description:"料號與成本"},products:{label:"產品",description:"BOM 與模組"},categories:{label:"類別",description:"物料分類"},sequences:{label:"序號",description:"Prefix / 流水"},quotes:{label:"報價",description:"報價單與交期"},orders:{label:"訂單",description:"接單與變更"},inventory:{label:"庫存",description:"入出庫與盤點"},production:{label:"產品/製令",description:"工單與製造履歷"}},a={view:"檢視",create:"新增",update:"編輯",disable:"停用",approve:"核准",lock:"鎖定","sequence-adjust":"調整序號",cancel:"作廢"},r={admin:{users:["view","create","update","disable","approve"],units:["view","create","update","disable","approve"],suppliers:["view","create","update","disable","approve"],customers:["view","create","update","disable","approve"],parts:["view","create","update","disable","approve"],products:["view","create","update","disable","approve"],categories:["view","create","update","disable","approve"],sequences:["view","lock","sequence-adjust","approve"],quotes:["view","create","update","approve","lock","cancel"],orders:["view","create","update","approve","lock","cancel"],inventory:["view","create","update","lock"],production:["view","create","update","approve","lock"]},manager:{users:["view","create","update","disable"],units:["view","create","update","disable"],suppliers:["view","create","update"],customers:["view","create","update"],parts:["view","create","update","disable"],products:["view","create","update"],categories:["view","create","update"],sequences:["view","lock"],quotes:["view","create","update","lock"],orders:["view","create","update","lock"],inventory:["view","create","update"],production:["view","create","update"]},planner:{users:["view"],units:["view","create"],suppliers:["view","create"],customers:["view","create"],parts:["view","create"],products:["view","create"],categories:["view","create"],sequences:["view"],quotes:["view","create"],orders:["view","create"],inventory:["view","create"],production:["view","create"]},operator:{users:["view"],units:["view"],suppliers:["view"],customers:["view"],parts:["view"],products:["view"],categories:["view"],sequences:["view"],quotes:["view"],orders:["view"],inventory:["view"],production:["view"]}};function l(e,t){let s={users:[],units:[],suppliers:[],customers:[],parts:[],products:[],categories:[],sequences:[],quotes:[],orders:[],inventory:[],production:[]},{roleFilter:a,departmentFilter:l}=t??{},i=e.filter(e=>{let t=!a||e.role===a,s=!l||!e.departments.length||e.departments.includes(l);return t&&s});if(!i.length)return s;for(let e of i)Object.entries(r[e.role]).forEach(([e,t])=>{let a=new Set(s[e]);t.forEach(e=>a.add(e)),s[e]=Array.from(a)});return s}function i(e,t,s,a){let r=l(e,a);return r[t]?.includes(s)??!1}function o({assignments:e,roleFilter:s,departmentFilter:a}){return{profile:(0,t.useMemo)(()=>l(e,{roleFilter:s,departmentFilter:a}),[e,s,a]),can:(t,r)=>i(e,t,r,{roleFilter:s,departmentFilter:a})}}e.s(["ACTION_LABELS",()=>a,"MODULE_DEFINITIONS",()=>s,"buildPermissionProfile",()=>l,"canPerformAction",()=>i],78598),e.s(["usePermission",()=>o],84616)},87174,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(47821),r=e.i(84616);let l=[{label:"全部等級",value:"all"},{label:"Level A",value:"A"},{label:"Level B",value:"B"},{label:"Level C",value:"C"}],i=[{label:"全部狀態",value:"all"},{label:"啟用",value:"active"},{label:"暫停",value:"suspended"}],o={keyword:"",level:"all",status:"all"};function n(){let[e,n]=(0,s.useState)(o),[c,d]=(0,s.useState)(o),p=a.users[0],{can:u}=(0,r.usePermission)({assignments:p.roles,roleFilter:p.primaryRole,departmentFilter:p.departments[0]??void 0}),m=u("suppliers","create"),v=u("suppliers","update"),x=(0,s.useMemo)(()=>a.suppliers.filter(e=>{let t=c.keyword.trim().toLowerCase(),s=!t||[e.name,e.code,e.contact,e.phone].join(" ").toLowerCase().includes(t),a="all"===c.level||e.level===c.level,r="all"===c.status||e.status===c.status;return s&&a&&r}),[c]);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-teal-600",children:"Suppliers"}),(0,t.jsx)("h1",{className:"text-2xl font-semibold text-slate-900",children:"供應商主檔"}),(0,t.jsx)("p",{className:"text-sm text-slate-500",children:"控管交期與等級，供採購與財務共用。僅授權人員可新增或停用。"})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsx)("button",{className:"rounded-full border border-slate-200 px-4 py-2 text-sm font-semibold text-slate-700 disabled:opacity-40",disabled:!m,children:"匯入 CSV"}),(0,t.jsx)("button",{disabled:!m,className:"rounded-full bg-slate-900 px-4 py-2 text-sm font-semibold text-white disabled:bg-slate-400",children:"新增供應商"})]})]}),(0,t.jsxs)("form",{onSubmit:t=>{t.preventDefault(),d(e)},className:"mt-6 grid gap-4 rounded-2xl bg-slate-50/80 p-4 md:grid-cols-4",children:[(0,t.jsxs)("label",{className:"md:col-span-2",children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-slate-600",children:"搜尋關鍵字"}),(0,t.jsx)("input",{type:"text",value:e.keyword,onChange:e=>n(t=>({...t,keyword:e.target.value})),placeholder:"供應商 / 聯絡人 / 電話",className:"mt-1 w-full rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm focus:border-teal-500 focus:outline-none"})]}),(0,t.jsxs)("label",{children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-slate-600",children:"等級"}),(0,t.jsx)("select",{value:e.level,onChange:e=>n(t=>({...t,level:e.target.value})),className:"mt-1 w-full rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm focus:border-teal-500 focus:outline-none",children:l.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,t.jsxs)("label",{children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-slate-600",children:"狀態"}),(0,t.jsx)("select",{value:e.status,onChange:e=>n(t=>({...t,status:e.target.value})),className:"mt-1 w-full rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm focus:border-teal-500 focus:outline-none",children:i.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,t.jsxs)("div",{className:"flex items-end gap-2 md:col-span-4 md:justify-end",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{n(o),d(o)},className:"rounded-full border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-600",children:"重置"}),(0,t.jsx)("button",{type:"submit",className:"rounded-full bg-teal-600 px-5 py-2 text-sm font-semibold text-white shadow-sm",children:"套用搜尋"})]})]})]}),(0,t.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,t.jsxs)("p",{className:"text-sm text-slate-500",children:["已篩選 ",x.length," 家供應商（共 ",a.suppliers.length," 家）"]}),!m&&(0,t.jsx)("span",{className:"text-xs text-amber-600",children:"需同管核准才能新增或匯入"})]}),(0,t.jsx)("div",{className:"mt-4 overflow-x-auto rounded-xl border border-slate-100",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-slate-100 text-sm",children:[(0,t.jsx)("thead",{className:"bg-slate-50",children:(0,t.jsx)("tr",{children:["名稱","聯絡人 / 電話","等級","交期(天)","狀態","動作"].map(e=>(0,t.jsx)("th",{className:"px-4 py-2 text-left text-xs font-semibold uppercase tracking-wide text-slate-500",children:e},e))})}),(0,t.jsx)("tbody",{className:"divide-y divide-slate-50",children:x.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-slate-50/70",children:[(0,t.jsxs)("td",{className:"whitespace-nowrap px-4 py-3",children:[(0,t.jsx)("div",{className:"font-semibold text-slate-900",children:e.name}),(0,t.jsx)("div",{className:"text-xs text-slate-500",children:e.code})]}),(0,t.jsxs)("td",{className:"whitespace-nowrap px-4 py-3 text-slate-700",children:[e.contact," ｜ ",e.phone]}),(0,t.jsxs)("td",{className:"whitespace-nowrap px-4 py-3 text-slate-700",children:["Level ",e.level]}),(0,t.jsx)("td",{className:"whitespace-nowrap px-4 py-3 text-slate-700",children:e.leadTimeDays}),(0,t.jsx)("td",{className:"whitespace-nowrap px-4 py-3",children:(0,t.jsx)("span",{className:`rounded-full px-3 py-1 text-xs font-semibold ${"active"===e.status?"bg-emerald-50 text-emerald-700":"bg-rose-50 text-rose-600"}`,children:"active"===e.status?"啟用":"暫停"})}),(0,t.jsx)("td",{className:"whitespace-nowrap px-4 py-3",children:(0,t.jsx)("button",{disabled:!v,className:"rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold text-slate-600 disabled:opacity-40",children:"管理"})})]},e.code))})]})})]})]})}e.s(["SupplierDirectory",()=>n])}]);