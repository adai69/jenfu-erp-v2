(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,84616,43873,78598,e=>{"use strict";var s=e.i(71645);e.s(["DEPARTMENT_DEFINITIONS",0,{executive:{label:"經營",description:"決策／策略"},rd:{label:"研發",description:"產品與設計"},production:{label:"生產",description:"製造與現場"},sales:{label:"營銷",description:"業務與客服"},management:{label:"管理",description:"行政／管理"},finance:{label:"財務",description:"財會／稽核"}},"ROLE_DEFINITIONS",0,{admin:{label:"Admin",description:"序號調整、審核、最高權限",hierarchy:4},manager:{label:"Manager",description:"日常維運與審核啟動",hierarchy:3},planner:{label:"Planner",description:"草稿建立、流程規劃",hierarchy:2},operator:{label:"Operator",description:"查詢與執行現場作業",hierarchy:1}}],43873);let r={users:{label:"使用者",description:"帳號與權限"},employees:{label:"員工",description:"人事資料卡"},units:{label:"計量單位",description:"跨模組基本單位"},suppliers:{label:"供應商",description:"採購夥伴"},brands:{label:"品牌",description:"品牌 / 製造商資訊"},countries:{label:"國家",description:"國別 / 幣別 / 區域"},purchaseMethods:{label:"採購方式",description:"採購策略與流程"},customers:{label:"客戶",description:"營銷對象"},parts:{label:"零件",description:"料號與成本"},products:{label:"產品",description:"BOM 與模組"},categories:{label:"類別",description:"物料分類"},files:{label:"檔案中心",description:"設計圖 / 圖片 / 附件"},sequences:{label:"序號",description:"Prefix / 流水"},quotes:{label:"報價",description:"報價單與交期"},orders:{label:"訂單",description:"接單與變更"},inventory:{label:"庫存",description:"入出庫與盤點"},production:{label:"產品/製令",description:"工單與製造履歷"},materials:{label:"物料",description:"零件與採購料主檔"}},t={view:"檢視",create:"新增",update:"編輯",disable:"停用",approve:"核准",lock:"鎖定","sequence-adjust":"調整序號",cancel:"作廢"},i={admin:{users:["view","create","update","disable","approve"],employees:["view","create","update","disable"],units:["view","create","update","disable","approve"],suppliers:["view","create","update","disable","approve"],brands:["view","create","update","disable"],countries:["view","create","update","disable"],purchaseMethods:["view","create","update","disable"],customers:["view","create","update","disable","approve"],parts:["view","create","update","disable","approve"],products:["view","create","update","disable","approve"],categories:["view","create","update","disable","approve"],sequences:["view","lock","sequence-adjust","approve"],quotes:["view","create","update","approve","lock","cancel"],orders:["view","create","update","approve","lock","cancel"],inventory:["view","create","update","lock"],production:["view","create","update","approve","lock"],materials:["view","create","update","disable"],files:["view","create","update","disable"]},manager:{users:["view","create","update","disable"],employees:["view","create","update"],units:["view","create","update","disable"],suppliers:["view","create","update"],brands:["view","create","update"],countries:["view","create","update"],purchaseMethods:["view","create","update"],customers:["view","create","update"],parts:["view","create","update","disable"],products:["view","create","update"],categories:["view","create","update"],sequences:["view","lock"],quotes:["view","create","update","lock"],orders:["view","create","update","lock"],inventory:["view","create","update"],production:["view","create","update"],materials:["view","create","update"],files:["view","create","update"]},planner:{users:["view"],employees:["view","create"],units:["view","create"],suppliers:["view","create"],brands:["view","create"],countries:["view"],purchaseMethods:["view","create"],customers:["view","create"],parts:["view","create"],products:["view","create"],categories:["view","create"],sequences:["view"],quotes:["view","create"],orders:["view","create"],inventory:["view","create"],production:["view","create"],materials:["view","create"],files:["view","create"]},operator:{users:["view"],employees:["view"],units:["view"],suppliers:["view"],brands:["view"],countries:["view"],purchaseMethods:["view"],customers:["view"],parts:["view"],products:["view"],categories:["view"],sequences:["view"],quotes:["view"],orders:["view"],inventory:["view"],production:["view"],materials:["view"],files:["view"]}};function a(e,s){let r={users:[],employees:[],units:[],suppliers:[],brands:[],countries:[],purchaseMethods:[],customers:[],parts:[],products:[],categories:[],materials:[],files:[],sequences:[],quotes:[],orders:[],inventory:[],production:[]},{roleFilter:t,departmentFilter:a}=s??{},l=e.filter(e=>{let s=!t||e.role===t,r=!a||!e.departments.length||e.departments.includes(a);return s&&r});if(!l.length)return r;for(let e of l)Object.entries(i[e.role]).forEach(([e,s])=>{let t=new Set(r[e]);s.forEach(e=>t.add(e)),r[e]=Array.from(t)});return r}function l(e,s,r,t){let i=a(e,t);return i[s]?.includes(r)??!1}e.s(["ACTION_LABELS",()=>t,"MODULE_DEFINITIONS",()=>r,"buildPermissionProfile",()=>a,"canPerformAction",()=>l],78598);var o=e.i(57951);function c(e){let{assignments:r,roleFilter:t,departmentFilter:i}=e??{},{claims:c}=(0,o.useAuth)(),d=!!(r&&r.length),n=(0,s.useMemo)(()=>{if(!c?.roles?.length)return[];let e=c.departments??[];return c.roles.map(s=>({role:s,departments:e}))},[c?.departments,c?.roles]),p=(0,s.useMemo)(()=>{if(d&&r)return a(r,{roleFilter:t,departmentFilter:i});let e=c?.modules;if(e){let s=a(n,{roleFilter:t,departmentFilter:i});return Object.keys(s).forEach(r=>{let t=e[r];Array.isArray(t)&&(s[r]=t)}),s}return n.length?a(n,{roleFilter:t,departmentFilter:i}):null},[r,c?.modules,i,n,t,d]);return{profile:p,can:(e,s)=>{if(d&&r)return l(r,e,s,{roleFilter:t,departmentFilter:i});let a=p?.[e];return!!Array.isArray(a)&&a.includes(s)}}}e.s(["usePermission",()=>c],84616)},68375,e=>{"use strict";var s=e.i(43476),r=e.i(22016),t=e.i(84616);let i=[{id:"basic",label:"基礎設定",helper:"各模組共用的基礎主檔，設定頻率較低但關係全域資料一致性。"},{id:"access",label:"人員與權限",helper:"帳號、角色與開通信件相關設定，建議由系統管理者操作。"}],a=[{id:"countries",label:"國家主檔",description:"國別 / 幣別 / 國碼設定",href:"/master/countries",group:"basic",permissionModule:"countries"},{id:"brands",label:"品牌主檔",description:"品牌 / 製造商資料",href:"/master/brands",group:"basic",permissionModule:"brands"},{id:"purchaseMethods",label:"採購方式主檔",description:"一般 / 委外 / 寄售流程規則",href:"/master/purchase-methods",group:"basic",permissionModule:"purchaseMethods"},{id:"materialCategories",label:"物料分類",description:"零件群組 / 供 BOM 使用",href:"/master/material-categories",group:"basic",permissionModule:"categories"},{id:"units",label:"計量單位",description:"跨模組共用量測單位",href:"/master/units",group:"basic",permissionModule:"units"},{id:"warehouses",label:"倉庫主檔",description:"倉別 / 預設收發設定",href:"/master/warehouses",group:"basic",permissionModule:"inventory"},{id:"paymentTerms",label:"付款條件主檔",description:"現金、月結、預付等條件",href:"/master/payment-terms",group:"basic",permissionModule:"suppliers"},{id:"sequences",label:"序號設定",description:"Prefix / Padding / 流水碼",href:"/master/sequences",group:"basic",permissionModule:"sequences",badge:"須審核"},{id:"users",label:"使用者主檔",description:"帳號、角色、部門",href:"/master/users",group:"access",permissionModule:"users"},{id:"userProvisioning",label:"帳號佇列",description:"建立紀錄 / 失敗原因",href:"/master/user-provisioning",group:"access",permissionModule:"users"}];function l(){let{can:e}=(0,t.usePermission)();return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("header",{className:"rounded-3xl bg-gradient-to-br from-slate-900 via-slate-800 to-slate-700 px-8 py-10 text-white shadow-xl",children:[(0,s.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.4em] text-teal-200",children:"Settings Hub"}),(0,s.jsx)("h1",{className:"mt-3 text-3xl font-semibold",children:"設定中心"}),(0,s.jsx)("p",{className:"mt-3 max-w-3xl text-sm text-slate-200",children:"這裡集中放置所有較少操作的設定類主檔。當需要調整品牌、國家、序號或帳號權限時，先到設定中心挑選模組再進入維護畫面，避免左側選單堆疊造成干擾。"})]}),i.map(t=>{let i=a.filter(e=>e.group===t.id);return i.length?(0,s.jsxs)("section",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.4em] text-slate-500",children:t.label}),(0,s.jsx)("h2",{className:"mt-1 text-2xl font-semibold text-slate-900",children:t.label}),(0,s.jsx)("p",{className:"mt-1 text-sm text-slate-500",children:t.helper})]}),(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-3",children:i.map(t=>{let i=!t.permissionModule||e(t.permissionModule,"view");return(0,s.jsxs)("article",{className:`rounded-2xl border border-slate-200 bg-white p-5 shadow-sm transition hover:-translate-y-0.5 hover:shadow-md ${i?"":"opacity-60"}`,children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-base font-semibold text-slate-900",children:t.label}),(0,s.jsx)("p",{className:"mt-1 text-sm text-slate-500",children:t.description})]}),t.badge?(0,s.jsx)("span",{className:"rounded-full border border-amber-300 bg-amber-50 px-3 py-1 text-xs font-semibold text-amber-600",children:t.badge}):null]}),(0,s.jsxs)("div",{className:"mt-5 flex items-center justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-xs font-mono text-slate-400",children:t.href}),i?(0,s.jsx)(r.default,{href:t.href,className:"rounded-full border border-teal-500 px-4 py-1.5 text-xs font-semibold text-teal-600 transition hover:bg-teal-50",children:"前往管理"}):(0,s.jsx)("span",{className:"rounded-full border border-slate-200 px-4 py-1.5 text-xs font-semibold text-slate-400",children:"無檢視權限"})]})]},t.id)})})]},t.id):null})]})}e.s(["SettingsCenter",()=>l])}]);